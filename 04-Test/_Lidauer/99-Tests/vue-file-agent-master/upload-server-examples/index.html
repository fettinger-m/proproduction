
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Full featured drag & drop enabled Vue file upload component with previews and upload progress">
    <meta name="author" content="Safraz Razik">
    <meta name="generator" content="Jekyll v3.8.6">


    <meta name="twitter:image:src" content="https://safrazik.github.io/vue-file-agent/website/assets/cover.png?v=1.5.0" />
    <meta name="twitter:site" content="@safrazik" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Vue File Agent" />
    <meta name="twitter:description" content="Full featured drag & drop enabled Vue file upload component with previews and upload progress" />

    <meta property="og:image" content="https://safrazik.github.io/vue-file-agent/website/assets/cover.png?v=1.5.0" />
    <meta property="og:site_name" content="GitHub" />
    <meta property="og:type" content="object" />
    <meta property="og:title" content="Vue File Agent" />
    <meta property="og:url" content="https://safrazik.github.io/vue-file-agent" />
    <meta property="og:description" content="Full featured drag &amp; drop enabled Vue file upload component with previews and upload progress - safrazik/vue-file-agent" />

    <title>Vue File Agent</title>

    <link rel="canonical" href="https://safrazik.github.io/vue-file-agent">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
    <link rel="stylesheet" href="https://safrazik.github.io/vue-file-agent/website/assets/styles.css?v=1.5.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vue-file-agent@1.5.0/dist/vue-file-agent.css">
    

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146428731-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-146428731-2');
    </script>
    




</head>
<body class="w-100 h-100" style="padding-top: 3.5rem;">



  <nav class="navbar navbar-expand fixed-top navbar-dark bg-dark px-0" style="background: rgba(52, 58, 64, 0.95) !important; height: 3.5rem;">
    <div class="container" style="padding-left: 15px;
      padding-right: 15px;">
      <a class="navbar-brand" href="http://safrazik.github.io/vue-file-agent/">
        <img style="width: 40px; height: 40px; border-radius: 50%;" src="http://safrazik.github.io/vue-file-agent/website/assets/logo.png?v=1.5.0">
        Vue File Agent
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarColor01">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="http://safrazik.github.io/vue-file-agent/docs/">Docs</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/safrazik/vue-file-agent">GitHub</a>
          </li>
        </ul>
      </div>
      <!-- <small class="navbar-text">Every file deserves to be treated equally</small> -->
    </div>
  </nav>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.1.1/es6-promise.auto.js" integrity="sha256-qq7wfY6gQJldAy+TGLT7UF/TqnfV4XFzGF/RzrVXq24=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tus-js-client@1.8.0/dist/tus.js"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/vue-file-agent@1.5.0/dist/vue-file-agent.umd.js"></script>
  

  <script src="https://unpkg.com/vue-slicksort@latest/dist/vue-slicksort.min.js"></script>

  <script type="text/javascript">
  window.getFilesDataInitial = function() {
  var filesBaseUrl =
    window.location.port == '4000'
      ? '/vue-file-agent/website/assets/files/'
      : 'https://safrazik.github.io/vue-file-agent/website/assets/files/';

  var videoData = {
    name: 'Golf.mp4',
    lastModified: 1576563996233,
    sizeText: '549 KB',
    size: 561813,
    type: 'video/mp4',
    ext: 'mp4',
    dimensions: { width: 640, height: 360 },
  };
  videoData.videoThumbnail = filesBaseUrl + 'Golf-thumb.jpg';
  videoData.imageColor = [66, 62, 45];

  var filesData = [];
  [
    {
      name: 'sample.pdf',
      lastModified: 1565232623243,
      sizeText: '3 KB',
      size: 3028,
      type: 'application/pdf',
      ext: 'pdf',
    },
    {
      name: 'Superb Fairy-wren.jpg',
      lastModified: 1576522061394,
      sizeText: '37 KB',
      size: 38093,
      type: 'image/jpeg',
      ext: 'jpg',
    },
    { name: 'Important sheet.ods', lastModified: 1564392646095, sizeText: '31 KB', size: 31276, type: '', ext: 'ods' },
    videoData,
    {
      name: 'Test Files.zip',
      lastModified: 1572147928098,
      sizeText: '198 KB',
      size: 202680,
      type: 'application/x-zip-compressed',
      ext: 'zip',
    },
    { name: 'Document 3.docx', lastModified: 1564392646097, sizeText: '109 KB', size: 111303, type: '', ext: 'docx' },
  ].forEach(function(fd) {
    fd.url = filesBaseUrl + fd.name;
    // fd.progress = 10;
    filesData.push(fd);
  });

  return filesData;
};

window.uploadUrl = localStorage.getItem('uploadUrl') || 'https://www.mocky.io/v2/5d4fb20b3000005c111099e3';

if (window.VueSlicksort && window.Vue) {
  window.Vue.component('vfa-sortable-list', window.VueSlicksort.SlickList);
  window.Vue.component('vfa-sortable-item', window.VueSlicksort.SlickItem);
}
if (window.VueFileAgent && window.tus) {
  window.VueFileAgent.plugins.tus = window.tus;
}

</script>
<div id="app">
  <div class="container">
    <div id="docs" name="docs"></div>
    <div class="markdown-body" style="margin: 40px 0;">
      <h1 id="upload-server-examples">Upload Server Examples</h1>

<h2 id="node-js">Node Js</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd upload-server-examples/node
npm install
node upload-server.js
</code></pre></div></div>

<p>Change Upload URL to: <code class="highlighter-rouge">http://localhost:3000/upload</code></p>

<h2 id="php">PHP</h2>

<p>Copy <code class="highlighter-rouge">upload-server-examples</code> into your web accessible directory (e.g: <code class="highlighter-rouge">/var/www</code> or <code class="highlighter-rouge">htdocs</code>)</p>

<p>Change Upload URL to: <code class="highlighter-rouge">http://localhost/upload-server-examples/php/upload-server.php</code></p>

    </div>
  </div>
  <div class="container">
    <div id="demo-advanced-wrapper">
      
      










  <div id="demo_advanced-wrapper" class="vue-code-wrapper vue-code-result-only">
    

        
<div id="demo_advanced-mount">
  <demo_advanced></demo_advanced>
</div>
<script type="text/x-template" id="demo_advanced-template">

  <!--  -->
  <div class="row">
    <div class="col-md-3 mb-3">
      <div class="bg-light p-2">
        <div class="row mx-n2">
          <div class="col-md-12 col-12 px-2">
            <div class="input-group input-group-sm mb-2">
              <div class="input-group-prepend">
                <span class="input-group-text"><small>:accept</small></span>
              </div>
              <input class="form-control" type="text" v-model="valAccept" placeholder="e.g: image/*,video/*" />
              <div class="input-group-append">
                <a
                  class="btn btn-warning"
                  href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#Unique_file_type_specifiers"
                  target="_blank"
                >
                  ?
                </a>
              </div>
            </div>
          </div>
          <div class="col-md-12 col-6 px-2">
            <div class="input-group input-group-sm mb-2">
              <div class="input-group-prepend">
                <span class="input-group-text"><small>:maxSize</small></span>
              </div>
              <input class="form-control" type="text" v-model="valMaxSize" placeholder="e.g: 500KB, 2.5MB, 1GB" />
            </div>
          </div>
          <div class="col-md-12 col-6 px-2">
            <div class="input-group input-group-sm mb-2">
              <div class="input-group-prepend">
                <span class="input-group-text"><small>:maxFiles</small></span>
              </div>
              <input class="form-control" type="number" v-model="valMaxFiles" placeholder="e.g: 4" />
            </div>
          </div>
        </div>
        <div class="row mx-n2">
          <div class="col-md-12 px-2 mb-1">
            <div class="input-group input-group-sm">
              <div class="input-group-prepend">
                <span class="input-group-text"><small>Upload URL</small></span>
              </div>
              <input id="advanced-demo-upload-url" class="form-control" type="text" v-model="uploadUrl" />
            </div>
          </div>
          <div class="col-6 col-md-12 px-2">
            <div class="custom-control custom-checkbox mt-1">
              <input type="checkbox" class="custom-control-input" id="advanced-demo-meta" v-model="meta" />
              <label class="custom-control-label" for="advanced-demo-meta">:meta</label>
            </div>
          </div>
          <div class="col-6 col-md-12 px-2">
            <div class="custom-control custom-checkbox mt-1">
              <input type="checkbox" class="custom-control-input" id="advanced-demo-multiple" v-model="multiple" />
              <label class="custom-control-label" for="advanced-demo-multiple">:multiple</label>
            </div>
          </div>
          <div class="col-6 col-md-12 px-2">
            <div class="custom-control custom-checkbox mt-1">
              <input type="checkbox" class="custom-control-input" id="advanced-demo-deletable" v-model="deletable" />
              <label class="custom-control-label" for="advanced-demo-deletable">:deletable</label>
            </div>
          </div>
          <div class="col-6 col-md-12 px-2">
            <div class="custom-control custom-checkbox mt-1">
              <input type="checkbox" class="custom-control-input" id="advanced-demo-editable" v-model="editable" />
              <label class="custom-control-label" for="advanced-demo-editable">:editable</label>
            </div>
          </div>
          <div class="col-6 col-md-12 px-2">
            <div class="custom-control custom-checkbox mt-1">
              <input type="checkbox" class="custom-control-input" id="advanced-demo-linkable" v-model="linkable" />
              <label class="custom-control-label" for="advanced-demo-linkable">:linkable</label>
            </div>
          </div>
          <div class="col-6 col-md-12 px-2">
            <div class="custom-control custom-checkbox mt-1">
              <input type="checkbox" class="custom-control-input" id="advanced-demo-resumable" v-model="resumable" />
              <label class="custom-control-label" for="advanced-demo-resumable"
                >:resumable (<a href="https://safrazik.github.io/vue-file-agent/docs/#resumable">Docs</a>)</label
              >
            </div>
          </div>
          <div class="col-6 col-md-12 px-2">
            <div class="custom-control custom-checkbox mt-1">
              <input type="checkbox" class="custom-control-input" id="advanced-demo-sortable" v-model="sortable" />
              <label class="custom-control-label" for="advanced-demo-sortable"
                >:sortable (<a href="https://safrazik.github.io/vue-file-agent/docs/#sortable">Docs</a>)</label
              >
            </div>

            <select class="custom-select custom-select-sm mt-1" v-model="sortable">
              <option selected :value="false">:sortable false</option>
              <!-- <option :value="false">false</option> -->
              <option :value="true">true</option>
              <option value="hold">"hold"</option>
              <option value="handle">"handle"</option>
            </select>
          </div>
          <div class="col-6 col-md-12 px-2">
            <div class="custom-control custom-checkbox mt-1">
              <input type="checkbox" class="custom-control-input" id="advanced-demo-disabled" v-model="disabled" />
              <label class="custom-control-label" for="advanced-demo-disabled">:disabled</label>
            </div>
          </div>
          <div class="col-6 col-md-12 px-2">
            <select class="custom-select custom-select-sm mt-1" v-model="theme">
              <option selected>- Theme -</option>
              <option value="default">Default Theme (default)</option>
              <option value="list">List Theme (list)</option>
            </select>
            <!--         <div class="custom-control custom-checkbox mt-1">
            <input type="checkbox" class="custom-control-input" id="advanced-demo-compact" v-model="compact">
            <label class="custom-control-label" for="advanced-demo-compact">:compact</label>
          </div> -->
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-5 col-sm-6 mb-3">
      <div class="mx-auto" :style="compact ? { width: '200px' } : {}">
        <VueFileAgent
          ref="vueFileAgent"
          :multiple="multiple"
          :meta="meta"
          :deletable="deletable"
          :editable="editable"
          :linkable="linkable"
          :sortable="sortable"
          :resumable="resumable"
          :disabled="disabled"
          :compact="compact"
          :accept="valAccept"
          :maxSize="valMaxSize"
          :maxFiles="valMaxFiles"
          :theme="theme"
          @select="filesSelected($event)"
          @delete="fileDeleted($event)"
          @sort="onSort($event)"
          v-model="filesData"
        ></VueFileAgent>
      </div>
    </div>

    <div class="col-md-4 col-sm-6 mb-3">
      <div class="bg-light p-2">
        <div class="form-inlinex">
          <div class="row">
            <div class="col-md-12">
              <div v-if="!filesData.length">
                No files selected
              </div>
              <div class="form-inline" v-if="filesData.length">
                <label class="my-1 mr-2" for="file-select-index">With File:</label>
                <!--       <select ref="fileIdx" class="custom-select my-1 mr-sm-2" id="file-select-index" v-model="selectedIdx">
              <option v-for="i in filesData.length" :value="i">{{ i }}</option>
            </select> -->
                <!-- </div><div> -->
                <button
                  type="button"
                  class="btn mr-1 mb-1"
                  :key="i"
                  v-for="(fileData, i) in filesData"
                  :class="{ 'btn-secondary': selectedIdx == i + 1, 'btn-light': selectedIdx != i + 1 }"
                  @click="selectedIdx = i + 1"
                >
                  <!-- <span class="badge badge-secondary" :style="{'background-color': fileData.color}"> -->
                  {{ i + 1 }}
                  <!-- </span> -->
                </button>
              </div>
            </div>
            <div class="col-md-12">
              <div class="row">
                <div class="col-md-12">
                  <label class="my-1 mr-2" for="set-progress-range">Set Progess to:</label>
                </div>
                <div class="col-md-12">
                  <input
                    type="range"
                    min="0"
                    max="100"
                    ref="prgInput"
                    @input="setProgress()"
                    @change="setProgress()"
                    id="set-progress-range"
                    class="custom-range"
                  />
                </div>
              </div>

              <button type="button" class="btn btn-outline-secondary mb-2" @click="moveIndex(-1)">&lt;&lt;</button>
              <button type="button" class="btn btn-outline-secondary mb-2" @click="moveIndex(1)">&gt;&gt;</button>
              <button type="button" class="btn btn-outline-danger mb-2" @click="remove()">Remove</button>
              <button type="button" class="btn btn-outline-success mb-2" @click="update()">Update</button>
              <button type="button" class="btn btn-outline-primary mb-2" @click="upload()">Upload</button>
            </div>
          </div>

          <hr />

          <div class="mb-2">
            <button
              class="btn btn-outline-secondary mb-2"
              :disabled="!filesDataForUpload.length"
              @click="uploadFiles()"
            >
              Upload Queue ({{ filesDataForUpload.length }})
            </button>

            <button class="btn btn-danger mb-2" :disabled="!filesDataInvalid.length" @click="removeInvalid()">
              Remove Invalid ({{ filesDataInvalid.length }})
            </button>

            <button
              type="button"
              class="btn btn-outline-danger mb-2"
              @click="removeAll()"
              :disabled="!filesData.length"
            >
              Remove All ({{ filesData.length }})
            </button>
          </div>
          <div>
            Sort by:
            <button type="button" class="btn btn-outline-secondary mb-2" @click="sortBy('lastModified')">
              Last Modified {{ sortDirection.lastModified }}
            </button>
            <button type="button" class="btn btn-outline-secondary mb-2" @click="sortBy('name')">
              Name {{ sortDirection.name }}
            </button>
          </div>
        </div>
        <!-- Move: <input type="number" ref="moveInput" value="1"> -->
        <!-- <input type="number" ref="removeIdx" value="1"> -->

        <!-- Set Progress to: -->
        <!--     <button @click="setProgress()">
            Set Progress 
          </button> -->
      </div>
    </div>
  </div>
  <!--  -->
</script>

<script type='text/javascript'>

var component = { template: '#demo_advanced-template',

  data: function() {
    return {
      filesData: this.getFilesDataInitial(),
      filesDataForUpload: [],
      uploadUrl: window.uploadUrl || 'https://www.mocky.io/v2/5d4fb20b3000005c111099e3',
      uploadHeaders: {},
      meta: true,
      multiple: true,
      deletable: true,
      editable: true,
      linkable: true,
      sortable: false,
      resumable: false,
      disabled: false,
      compact: false,
      theme: 'list',
      sortDirection: {
        lastModified: 'ASC',
        name: 'ASC',
      },
      selectedIdx: 1,
      valAccept: 'image/*,video/*,.pdf,.doc,.docx,.ods',
      valMaxSize: '10MB',
      valMaxFiles: 14,
    };
  },
  computed: {
    filesDataInvalid: function() {
      var filesDataInvalid = [];
      for (var i = 0; i < this.filesData.length; i++) {
        if (this.filesData[i].error) {
          filesDataInvalid.push(this.filesData[i]);
        }
      }
      return filesDataInvalid;
    },
    uploadEndpoint: function() {
      if (this.resumable && this.uploadUrl.indexOf('mocky.io') !== -1) {
        return 'https://master.tus.io/files/';
      }
      return this.uploadUrl;
    },
  },
  methods: {
    getFilesDataInitial: function() {
      return window.getFilesDataInitial();
    },
    getSelectedFileData: function() {
      var i = this.selectedIdx;
      i = i - 1;
      if (!this.filesData[i]) {
        return;
      }
      return this.filesData[i];
    },
    removeAll: function() {
      console.log(this.filesData);
      this.filesData = [];
      this.filesDataForUpload = [];
    },
    setProgress: function() {
      var fileData = this.getSelectedFileData();
      if (!fileData) {
        return;
      }
      var prg = this.$refs.prgInput.value;
      fileData.progress(prg);
    },
    removeInvalid: function() {
      var filesDataNew = this.filesData.concat([]);
      for (var i = 0; i < this.filesDataInvalid.length; i++) {
        var idx = filesDataNew.indexOf(this.filesDataInvalid[i]);
        if (idx !== -1) {
          filesDataNew.splice(idx, 1);
        }
      }
      filesDataNew = [];
      for (i = 0; i < this.filesData.length; i++) {
        if (!this.filesData[i].error) {
          filesDataNew.push(this.filesData[i]);
        }
      }
      this.filesData = filesDataNew; // mutate at once, do not splice each
    },
    remove: function() {
      console.log('removing...');
      var i = this.selectedIdx;
      i = i - 1;
      if (!this.filesData[i]) {
        return;
      }
      this.filesData.splice(i, 1);
    },
    update: function() {
      var fileData = this.getSelectedFileData();
      if (!fileData) {
        return;
      }
      if (!(fileData.file && fileData.file instanceof File)) {
        alert('This is not a user selected file');
        return;
      }
      this.$refs.vueFileAgent.updateUpload(this.uploadUrl, this.uploadHeaders, fileData);
    },
    upload: function() {
      console.log('let au debug');
      var fileData = this.getSelectedFileData();
      if (!fileData) {
        return;
      }
      if (!(fileData.file && fileData.file instanceof File)) {
        alert('This is not a user selected file');
        return;
      }
      var i = this.filesDataForUpload.indexOf(fileData);
      if (i !== -1) {
        this.filesDataForUpload.splice(i, 1);
      }
      this.$refs.vueFileAgent.upload(this.uploadEndpoint, this.uploadHeaders, [fileData]);
    },
    moveIndex: function(dir) {
      console.log('moveIndex', dir);
      var index = parseInt(this.selectedIdx) - 1;
      var newIndex = index + dir;
      if (newIndex < 0) {
        newIndex = this.filesData.length - 1;
      }
      if (newIndex >= this.filesData.length) {
        newIndex = 0;
      }
      var existing = this.filesData[index];
      var adjacent = this.filesData[newIndex];
      this.selectedIdx = newIndex + 1;
      if (!existing || !adjacent) {
        return;
      }
      var filesData = this.filesData;
      filesData[newIndex] = existing;
      filesData[index] = adjacent;
      this.filesData = filesData.concat([]); // cause Vue array mutation
    },
    sortBy: function(prop) {
      // var asc = this['_is_sorted_desc_' + prop] = !this['_is_sorted_desc_' + prop];
      var direction = this.sortDirection[prop];
      this.sortDirection[prop] = direction == 'DESC' ? 'ASC' : 'DESC';
      // console.log('sortBy', prop, this.filesData);
      var ret = direction == 'DESC' ? -1 : 1;
      this.filesData = this.filesData.sort(function(fd1, fd2) {
        var f1 = fd1.file || fd1;
        var f2 = fd2.file || fd2;
        return f1[prop] > f2[prop] ? 1 * ret : -1 * ret;
      });
      // console.log('sortBy after', prop, this.filesData);
    },

    uploadFiles: function() {
      // Using the default uploader. You may use another uploader instead.
      this.$refs.vueFileAgent.upload(this.uploadEndpoint, this.uploadHeaders, this.filesDataForUpload);
      this.filesDataForUpload = [];
    },
    deleteUploadedFile: function(fileData) {
      // Using the default uploader. You may use another uploader instead.
      this.$refs.vueFileAgent.deleteUpload(this.uploadEndpoint, this.uploadHeaders, fileData);
    },
    filesSelected: function(filesData) {
      console.log('filesSelected', filesData);
      var validFilesData = [];
      for (var i = 0; i < filesData.length; i++) {
        if (!filesData[i].error) {
          validFilesData.push(filesData[i]);
        }
      }
      console.log('filesSelected', filesData, validFilesData);
      this.filesDataForUpload = this.filesDataForUpload.concat(validFilesData);
    },
    fileDeleted: function(fileData) {
      var i = this.filesDataForUpload.indexOf(fileData);
      if (i !== -1) {
        this.filesDataForUpload.splice(i, 1);
      } else {
        this.deleteUploadedFile(fileData);
      }
    },
    onSort(event) {
      console.log(
        'sorted',
        event.oldIndex,
        event.newIndex,
        this.filesData.map(function(fd) {
          return typeof fd.name == 'function' ? fd.name() : fd.name;
        }),
      );
    },
  },
  watch: {
    filesData() {},
  },
};

; new Vue({ components: {'demo_advanced': component}, el: '#demo_advanced-mount'});
</script>


      

  </div>


<style type="text/css">
  #demo_advanced-wrapper blockquote {
    background: #EEE;
    color: #000;
    font-weight: bold;
    margin-bottom: 0;
    padding: 2px 10px;
  }
  #demo_advanced-wrapper .codepen-link {
    float: right;
  }
  #demo_advanced-wrapper .highlight pre {
    max-height: 300px;
  }
</style>
    </div>
  </div>
</div>

  <div class="bg-secondary text-white mt-5 py-3">
    <div class="container">
      <div class="text-center mb-2">
        Made with love from
        <a class="text-white" href="https://twitter.com/safrazik" target="_blank"><strong>Safraz Razik</strong></a>
        <br>
      </div>
      <div class="text-center">
        <a href="https://twitter.com/safrazik?ref_src=vfa" class="twitter-follow-button" data-show-count="false" data-size="large">Follow on Twitter</a>
      </div>
    </div>
  </div>



  <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

</body>
</html>